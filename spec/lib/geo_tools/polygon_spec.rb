require 'spec_helper'

RSpec.describe GeoTools::Polygon do
  describe ".contains?" do
    it "returns true for Frankfurt am Main in Area #1" do
      area = 'POLYGON ((7.36083984375 50.666872321810715, 8.19580078125 49.82380908513249, 10.634765625 50.190967765585604, 10.72265625 51.481382896100975, 8.76708984375 51.52241608253253, 7.36083984375 50.666872321810715))'
      point = 'POINT (8.6820917 50.1106444)'
      expect(GeoTools::Polygon.new(area).contains?(point)).to eq(true)
    end

    it "returns true for Bratislava in Area #2" do
      area = 'POLYGON ((12.32666015625 48.10743118848039, 12.06298828125 48.06339653776211, 12.54638671875 46.66451741754235, 14.39208984375 49.18170338770663, 16.45751953125 49.15296965617042, 16.98486328125 46.6795944656402, 18.4130859375 46.58906908309182, 18.25927734375 50.12057809796008, 13.886718749999998 50.12057809796008, 12.32666015625 48.10743118848039))'
      point = 'POINT (17.1093063 48.1516988)'
      expect(GeoTools::Polygon.new(area).contains?(point)).to eq(true)
    end

    it "returns false for Wien in Area #2" do
      area = 'POLYGON ((12.32666015625 48.10743118848039, 12.06298828125 48.06339653776211, 12.54638671875 46.66451741754235, 14.39208984375 49.18170338770663, 16.45751953125 49.15296965617042, 16.98486328125 46.6795944656402, 18.4130859375 46.58906908309182, 18.25927734375 50.12057809796008, 13.886718749999998 50.12057809796008, 12.32666015625 48.10743118848039))'
      point = 'POINT (16.3725042 48.2083537)'
      expect(GeoTools::Polygon.new(area).contains?(point)).to eq(false)
    end

    it "returns true for Portland in Area #5" do
      area = 'POLYGON ((-119.61914062499999 33.578014746143985, -113.37890625 30.90222470517144, -105.99609375 31.12819929911196, -105.29296874999999 32.99023555965106, -105.8203125 35.02999636902566, -106.962890625 35.31736632923788, -108.544921875 35.53222622770337, -114.08203125 35.38904996691167, -118.564453125 38.13455657705411, -120.58593749999999 42.293564192170095, -120.41015624999999 45.089035564831036, -118.47656249999999 46.619261036171515, -116.01562499999999 47.040182144806664, -110.478515625 46.98025235521883, -107.841796875 44.902577996288876, -105.99609375 40.78054143186033, -104.94140625 36.80928470205937, -103.798828125 33.87041555094183, -100.986328125 34.08906131584994, -100.283203125 39.095962936305476, -101.42578124999999 45.336701909968134, -106.435546875 50.233151832472245, -117.861328125 50.233151832472245, -123.74999999999999 46.558860303117164, -124.01367187499999 39.027718840211605, -119.61914062499999 33.578014746143985))'
      point = 'POINT (-122.6741949 45.5202471)'
      expect(GeoTools::Polygon.new(area).contains?(point)).to eq(true)
    end

    it "returns false for Salt Lake City in Area #5" do
      area = 'POLYGON ((-119.61914062499999 33.578014746143985, -113.37890625 30.90222470517144, -105.99609375 31.12819929911196, -105.29296874999999 32.99023555965106, -105.8203125 35.02999636902566, -106.962890625 35.31736632923788, -108.544921875 35.53222622770337, -114.08203125 35.38904996691167, -118.564453125 38.13455657705411, -120.58593749999999 42.293564192170095, -120.41015624999999 45.089035564831036, -118.47656249999999 46.619261036171515, -116.01562499999999 47.040182144806664, -110.478515625 46.98025235521883, -107.841796875 44.902577996288876, -105.99609375 40.78054143186033, -104.94140625 36.80928470205937, -103.798828125 33.87041555094183, -100.986328125 34.08906131584994, -100.283203125 39.095962936305476, -101.42578124999999 45.336701909968134, -106.435546875 50.233151832472245, -117.861328125 50.233151832472245, -123.74999999999999 46.558860303117164, -124.01367187499999 39.027718840211605, -119.61914062499999 33.578014746143985))'
      point = 'POINT (-111.8904308 40.7670126)'
      expect(GeoTools::Polygon.new(area).contains?(point)).to eq(false)
    end
  end
end
